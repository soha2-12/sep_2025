class Solution(object):
    def maxSubarraySum(self, nums, k):
        n = len(nums)
        prefix = 0
        
        # for each remainder r, store minimum prefix sum seen so far
        min_prefix = [float('inf')] * k
        
        ans = -float('inf')
        min_prefix[0] = 0   # IMPORTANT FIX

        for i in range(n):
            prefix += nums[i]
            r = (i + 1) % k

            ans = max(ans, prefix - min_prefix[r])
            min_prefix[r] = min(min_prefix[r], prefix)

        return ans
